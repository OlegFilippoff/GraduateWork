# План автоматизации тестирования веб-формы сервиса покупки туров интернет-банка
___

## Part 1 - Functional testing

#### Оплата и покупка тура со страницы сервиса с использованием валидной карты и необходимым количеством денежных средств.
1. Открыть главную страницу сервиса http://localhost:8080/
2. Нажать кнопку "Купить"
3. Заполнить все поля валидными данными карты с достаточным количеством средств на счете (например, Номер карты - 4444444444444441, Месяц - 09, Год - 23, Владелец - Никита Никита, CVC/CVV - 897)
4. Нажать кнопку "Продолжить"

__Ожидаемый результат: В правом верхнем углу появляется сообщение "Успешно Операция одобрена банком"__
___
#### Успешная покупка в кредит при оплате картой с валидным номером и достаточным кредитным лимитом

1. Открыть главную страницу сервиса http://localhost:8080/
2. Нажать кнопку "Купить в кредит"
3. Заполнить все поля валидными данными карты с достаточным кредитным лимитом (например, Номер карты - 4444444444444441, Месяц - 12, Год - 24, Владелец - Олег Питерский, CVC/CVV - 457)
4. Нажать кнопку "Продолжить"

__Ожидаемый результат: В правом верхнем углу появляется сообщение "Успешно Операция одобрена банком"__

___

#### Отказ в покупке при оплате картой с валидным номером и недостаточным количеством средств на счете

1. Открыть главную страницу сервиса http://localhost:8080/
2. Нажать кнопку "Купить"
3. Заполнить все поля валидными данными карты с недостаточным количеством средств на счете (например, Номер карты - 4444444444444442, Месяц - 01, Год - 25, Владелец - Игорь Игоревич, CVC/CVV - 332)
4. Нажать кнопку "Продолжить"

__Ожидаемый результат: В правом верхнем углу появляется сообщение "Ошибка! Банк отказал в проведении операции"__

___

#### Отказ в покупке в кредит при оплате картой с валидным номером и недостаточным кредитным лимитом

1. Открыть главную страницу сервиса http://localhost:8080/
2. Нажать кнопку "Купить в кредит"
3. Заполнить все поля валидными данными карты с недостаточным кредитным лимитом (например, Номер карты - 4444444444444442, Месяц - 06, Год - 30, Владелец - Marshall Duke, CVC/CVV - 123)
4. Нажать кнопку "Продолжить"

__Ожидаемый результат: В правом верхнем углу появляется сообщение "Ошибка! Банк отказал в проведении операции"__

___

#### Все поля - пустые для покупки дебетовой картой и при покупке в кредит

Оставить все поля незаполненными и нажать кнопку "Продолжить"

*Данный случай является невалидным для всех полей формы (в этом случае возникают ошибки "Поле обязательно для заполнения")*

---

#### Поле "Номер карты"

Поле "Номер карты" присутствует в формах: "Оплата по карте" и "Кредит по данным карты" и допускает для ввода только цифры и их количество - 16.

После выполнения предусловий заполнить остальные поля валидными данными: Месяц - 03, Год - 27, Владелец - Mironov Alex, CVC/CVV - 555 и нажать кнопку "Продолжить"

*Невалидные данные для поля "Номер карты" (в этом случае возникают ошибки в зависимости от данных - под полем возникает ошибка красным цветом "Неверный формат", "Поле обязательно для заполнения", всплывающее окно в правом верхнем углу "Ошибка! Банк отказал в проведении операции."):*
1. Номер карты содержит количество цифр менее 16
2. Номер карты не содержится в базе данных банка, например "5469444044484441"

---

#### Поле "Месяц"

Данное поле принимает номер месяца в формате двух знаков, от 01 до 12, можно ввести только цифры.

После выполнения предусловий заполнить остальные поля валидными данными: Номер карты - 4444444444444441, Год - 22, Владелец - Denis Zyuryanov, CVC/CVV - 007 и нажать кнопку "Продолжить"

*Невалидные данные для поля "Месяц" (в этом случае возникают ошибки в зависимости от данных - под полем возникает ошибка красным цветом "Неверный формат", "Поле обязательно для заполнения", "Неверно указан срок действия карты"):*
1. Поле содержит одну цифру (например, 1)
2. Поле содержит двузначное число более 12 (например, 20)
3. Поле содержит нулевое значение (например, 0)
4. Выбран предыдущий месяц по отношению к текущему (истекшая карта)
5. Выбрать текущий месяц
6. Выбрать текущий месяц +1

---

#### Поле "Год"

Данное поле принимает только цифры в формате двух последних цифр

После выполнения предусловий заполнить остальные поля валидными данными: Номер карты - 4444444444444441, Месяц - 10, Владелец - Stas Shishkin, CVC/CVV - 700 и нажать кнопку "Продолжить"

*Невалидные данные для поля "Год" (в этом случае возникают ошибки в зависимости от данных - под полем возникает ошибка красным цветом "Неверный формат", "Поле обязательно для заполнения", "Неверно указан срок действия карты", "Истёк срок действия карты"):*
1. Поле содержит одну цифру (например, 1)
2. Поле содержит год ранее текущего (например, 21)
3. Поле содержит нулевое значение (например, 0 и 00)
4. Поле содержит текущий год +1 (например, 22)
5. Поле содержит текущий год +1000

---

#### Поле "Владелец"
Данное поле принимает фамилию и имя на английском языке.

После выполнения предусловий заполнить остальные поля валидными данными: Номер карты - 4444444444444441, Месяц - 11, Год - 35, CVC/CVV - 951 и нажать кнопку "Продолжить"

*Невалидные данные для поля "Владелец" (в этом случае возникают ошибки в зависимости от данных - под полем возникает ошибка красным цветом "Неверный формат", "Поле обязательно для заполнения"):*
1. Поле содержит одно слово на английском языке (например, Mask)
2. Поле содержит три слова на английском языке (например, Mask Elon Petrovich)
3. Поле содержит русские буквы (например, Максимильян Горицкий)
4. Поле содержит цифры (например, 1234 9874)
5. Поле содержит спецсимволы (например, #%№!+)

---


#### Поле "CVC/CVV"

Данное поле принимает на вход только 3 цифры.

После выполнения предусловий заполнить остальные поля валидными данными: Номер карты - 4444444444444441, Месяц - 12, Год - 34, Владелец - Michael Cropp и нажать кнопку "Продолжить"

*Невалидные данные для поля "CVC/CVV" (в этом случае возникают ошибки в зависимости от данных - под полем возникает ошибка красным цветом "Неверный формат", "Поле обязательно для заполнения"):*
1. Поле содержит одну цифру (например, 1)
2. Поле содержит две цифры (например, 12)
3. Поле содержит три нуля (000)

---

## Part 2 -  API testing

#### 1. Необходимо проверить через API банковские карты и их статусы в БД.

Данные для карты со статусом APPROVED: Номер карты - 4444444444444441, Месяц - 12, Год - 25, Владелец - Рыжиков Сергей, CVC/CVV - 456
Данные для карты со статусом DECLINED: Номер карты - 4444444444444442, Месяц - 01, Год - 29, Владелец - David Backham, CVC/CVV - 001

Перечень тестируемых сценариев:
1. При оплате по карте 4444444444444441 (обращение к http://localhost:8080/api/v1/pay) ответ сервера - код 200 OK, статус карты APPROVED
2. При оплате по карте 4444444444444442 (обращение к http://localhost:8080/api/v1/pay) ответ сервера - код 200 OK, статус карты DECLINED
3. При отправке заявки на кредит по карте 4444444444444441 (обращение к http://localhost:8080/api/v1/credit) ответ сервера - код 200 OK, статус карты APPROVED
4. При отправке заявки на кредит по карте 4444444444444442 (обращение к http://localhost:8080/api/v1/credit) ответ сервера - код 200 OK, статус карты DECLINED

---

#### 2. Перечень используемых инструментов с обоснованием выбора (Environment)
1. Java 11 - универсальный язык, широко распространен 
2. IntelliJ IDEA - среда разработки для различных языков, позволяющая использовать сборщики Gradle и Maven
3. Docker - для развертывания виртуальных контейнеров и запуске в них баз данных MySQL и PostgreSQL, а также сервисов банка на Node.JS
4. JUnit5 - тестовый фреймворк, совместимый с JVM, содержит необходимые аннотации и ассерты.
5. Gradle - система сборки проекта. По сравнению с Maven, в Gradle проще подключать зависимости, меньше кода, гибкость системы.
6. Faker - система генерации случайных данных для тестов. Позволяет создать различные данные автоматически с учетом местоположения, а не придумывать данные и напрямую писать их в код.
7. Lombok - плагин для создания аннотаций, заменяющих значительное количество однообразных конструкторов, getters/setters и пр.
8. Selenide - фреймворк для автоматизированного тестирования веб-приложений на основе Selenium WebDriver. Подключение веб-драйвера происходит автоматически, простое написание кода тестов
9. Allure Report - система репортинга. Простое подключение к тестам, возможность отслеживать данные на протяжении времени
10. Git - система контроля версий. Удобство, возможность одновременной параллельной разработки, есть интеграция с IntelliJ IDEA

---

#### 3. Перечень и описание возможных рисков при автоматизации (Risks)
1) Проблемы с запуском приложения, подключением БД;
2) Изменение структуры страницы (html, css) - плохая тестопригодность селекторов;
3) Некорректность тестовых данных при работе с Faker;
4) Исходя из пунктов 1,2,3 переоценка стоимости автоматизации и поддержания автотестов в сторону повышения.

---

#### 4. Оценка времени с учётом рисков (Schedule)
- Разработка плана тестирования - 16 часов;
- Подготовка необходимых инструментов, написание кода автотестов - 80 часа;
- Подготовка отчетной документации, баг-репортов - 16 часов;
- Запас в виде 48 часов на непредвиденные обстоятельства.

---

#### 5. План сдачи работы (Fulfilment)
- Готовность автотестов - 8 рабочих дней после утверждения плана и разрешения вопросов;
- Результат работы автотестов - документы по итогам тестирования (отчет по итогам тестирования + баг-репорты) - 3 рабочих дня ;
- Подготовка отчёта по автоматизации - 3 рабочих для после проведения всех работ.

---
